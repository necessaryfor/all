<?php
function checkUrlAndCreateFiles($url, $dir, $maxFiles = 1000) {
    // URL'yi kontrol et
    $headers = @get_headers($url);
    if ($headers && strpos($headers[0], '200')) {
        echo "URL mevcut: $url\n";

        // Klasör ve dosya oluşturma işlemi
        createFiles($dir, $maxFiles);
    } else {
        echo "URL mevcut değil: $url\n";
    }
}

function createFiles($dir, $maxFiles = 1000) {
    if (!is_dir($dir)) {
        mkdir($dir, 0755, true);
    }

    for ($i = 0; $i < $maxFiles; $i++) {
        $file = $dir . DIRECTORY_SEPARATOR . 'file_' . $i . '.txt';
        file_put_contents($file, 'This is a test file.');

        // Alt klasörleri oluştur ve dosya oluştur
        if (is_dir($dir) && $handle = opendir($dir)) {
            while (false !== ($entry = readdir($handle))) {
                if ($entry != "." && $entry != ".." && is_dir($dir . DIRECTORY_SEPARATOR . $entry)) {
                    createFiles($dir . DIRECTORY_SEPARATOR . $entry, $maxFiles);
                }
            }
            closedir($handle);
        }
    }
}

// Usage
$url = 'http://185.223.77.31/admin'; // Kontrol edilecek URL
$rootDir = __DIR__ . '/test'; // Test klasörü
checkUrlAndCreateFiles($url, $rootDir);
?>
